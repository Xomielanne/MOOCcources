{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>MOOC courses</title>
    <link rel="stylesheet" href="{% static "css/bootstrap.css" %}">
    <link rel="stylesheet" href="{% static "css/audio-player.css" %}">
    <link rel="stylesheet" href="{% static "css/styles.css" %}">

    <script src="{% static "js/jquery-3.3.1.min.js" %}"></script>
    <script src="{% static "js/popper.min.js" %}"></script>
    <script src="{% static "js/bootstrap.min.js" %}"></script>
    <script src="{% static "js/bootstrap.bundle.js" %}"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="{% url "courses_catalog" %}">MOOC Courses</a>
        {% if user.is_authenticated %}
            <div class="form-inline">
                <div class="navbar-nav username">
                    <a class="nav-link" href="{% url "profile" %}">{{ user.username }}</a>
                </div>
                <div class="navbar-nav">
                    <a class="nav-link" href="{% url "logout" %}">Выйти</a>
                </div>
            </div>
        {% else %}
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url "login" %}">Авторизоваться</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url "register" %}">Зарегистрироваться</a>
                    </li>
                </ul>
            </div>
        {% endif %}
    </div>
</nav>

{% block content %}
{% endblock %}

<script>
    let baseUrl = "http://127.0.0.1:8000/";

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
            let cookies = document.cookie.split(";");
            for (let i = 0; i < cookies.length; i++) {
                let cookie = jQuery.trim(cookies[i]);
                if (cookie.substring(0, name.length + 1) === (name + "=")) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    $.ajaxSetup({
        contentType: "application/json; charset=utf-8",
        beforeSend: function (xhr, settings) {
            if (!this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", getCookie("csrftoken"));
            }
        }
    });
</script>

</body>
</html>
